(window.webpackJsonpv2=window.webpackJsonpv2||[]).push([[2],{617:function(e,t,a){},634:function(e,t){},718:function(e,t,a){"use strict";a.r(t);a(302);var n=a(266),c=(a(77),a(26)),r=(a(99),a(42)),l=(a(171),a(82)),i=(a(133),a(49)),s=a(13),u=a(0),o=a.n(u),f=a(14),m=(a(617),a(18)),p=a(618),d=a.n(p),b=(a(635),a(23));var g=function(e){return o.a.createElement(d.a,{value:e.value,onChange:e.onChange,options:{autofocus:!0,autosave:!0,previewRender:b.h}})},E=(a(37),a(3)),h=(a(101),a(38)),v=a(69),O=(a(169),a(95)),j=O.a.CheckableTag;var y=function(e){var t=e.list,a=e.setList,n=Object(u.useState)(!1),c=Object(s.a)(n,2),l=c[0],i=c[1],f=Object(u.useState)(""),m=Object(s.a)(f,2),p=m[0],d=m[1],b=e.selectedList,g=e.setSelectedList,y=null;function L(){p&&!t.find(function(e){return e===p})&&(a([].concat(Object(v.a)(t),[p])),g([].concat(Object(v.a)(b),[p])),d("")),i(!1)}return o.a.createElement(o.a.Fragment,null,t.map(function(e,n){var c=e.length>20,r=o.a.createElement(j,{key:e,closable:"true",onClose:function(){return function(e){var n=t.filter(function(t){return t!==e});a(n)}(e)},checked:b.includes(e),onChange:function(t){return function(e,t){var a=t?[].concat(Object(v.a)(b),[e]):b.filter(function(t){return t!==e});g(a)}(e,t)},color:"#1890ff"},c?"".concat(e.slice(0,20),"..."):e);return c?o.a.createElement(h.a,{title:e,key:e},r):r}),o.a.createElement(r.a,{style:{width:78,display:l?"inline":"none"},ref:function(e){y=e},type:"text",size:"small",value:p,onChange:function(e){return d(e.target.value)},onBlur:L,onPressEnter:L}),!l&&o.a.createElement(O.a,{onClick:function(){i(!0),y&&y.focus()},style:{background:"#fff",borderStyle:"dashed"}},o.a.createElement(E.a,{type:"plus"})," New Tag"))};t.default=function(e){var t=Object(f.d)(function(e){return{tagList:e.article.tagList,categoryList:e.article.categoryList,authorId:e.user.userId}}),a=Object(u.useState)(""),p=Object(s.a)(a,2),d=p[0],b=p[1],E=Object(u.useState)(""),h=Object(s.a)(E,2),v=h[0],O=h[1],j=Object(u.useState)([]),L=Object(s.a)(j,2),S=L[0],k=L[1],w=Object(u.useState)([]),C=Object(s.a)(w,2),N=C[0],I=C[1],x=Object(u.useState)([]),z=Object(s.a)(x,2),J=z[0],T=z[1],q=Object(u.useState)([]),B=Object(s.a)(q,2),F=B[0],P=B[1],R=parseInt(e.match.params.id);return Object(u.useEffect)(function(){var e;R&&(e=R,m.a.get("/article/".concat(e,"?type=0")).then(function(e){O(e.title),b(e.content);var t=e.tags.map(function(e){return e.name}),a=e.categories.map(function(e){return e.name});k(t),I(a),T(t),P(a)}))},[e.match.params]),Object(u.useEffect)(function(){if(!R){var e=t.tagList.map(function(e){return e.name}).slice(0,10),a=t.categoryList.map(function(e){return e.name}).slice(0,10);k(e),I(a),e[0]&&T([e[0]]),a[0]&&P([a[0]])}},[t.tagList,t.categoryList]),o.a.createElement("div",{className:"admin-edit-article"},o.a.createElement("ul",{className:"form-list"},o.a.createElement("li",null,o.a.createElement("span",{className:"label"},"\u6807\u9898\uff1a"),o.a.createElement("span",{style:{flex:1}},o.a.createElement(r.a,{placeholder:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898",className:"title-input",name:"title",value:v,onChange:function(e){return O(e.target.value)}}))),o.a.createElement("li",null,o.a.createElement("span",{className:"label"},"\u6807\u7b7e\uff1a"),o.a.createElement("span",null,o.a.createElement(y,{list:S,setList:k,selectedList:J,setSelectedList:T}))),o.a.createElement("li",null,o.a.createElement("span",{className:"label"},"\u5206\u7c7b\uff1a"),o.a.createElement("span",null,o.a.createElement(y,{list:N,setList:I,selectedList:F,setSelectedList:P})))),o.a.createElement(g,{value:d,onChange:b}),o.a.createElement(c.a,{type:"primary",shape:"circle",size:"large",disabled:!v,className:"action-icon",title:R?"\u66f4\u65b0":"\u65b0\u589e",icon:R?"sync":"plus",onClick:function(){R?m.a.put("/article/".concat(R),{title:v,content:d,tags:J,categories:F}).then(function(){i.a.success("\u66f4\u65b0\u6210\u529f")}):function(){if(!v)return i.a.warning("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01");m.a.post("/article",{title:v,content:d,tagList:J,categoryList:F,authorId:t.authorId}).then(function(t){l.a.confirm({title:"\u6587\u7ae0\u521b\u5efa\u6210\u529f\uff01\u662f\u5426\u7acb\u5373\u67e5\u770b\uff1f",onOk:function(){return e.history.push("/article/".concat(t.id))}})})}()}}),o.a.createElement(n.a,{target:function(){return document.querySelector(".admin-main")}}))}}}]);