(window.webpackJsonpv2=window.webpackJsonpv2||[]).push([[10],{719:function(e,t,a){"use strict";a.r(t);a(578);var n=a(577),r=(a(301),a(215)),c=(a(37),a(3)),o=(a(77),a(26)),i=(a(169),a(95)),l=a(34),u=a(13),m=a(0),s=a.n(m),d=a(14),f=a(18),p=a(21),y=a(124),b=a.n(y),g=(a(170),a(81)),E=(a(99),a(42)),v=(a(304),a(128)),O=a(214),w=a(19),j=a(23);function k(e){var t=document.createElement("a"),a=Object(j.d)();t.href=a?"".concat(w.b).concat(e,"?token=").concat(a):"".concat(w.b).concat(e),document.body.appendChild(t),t.click(),document.body.removeChild(t)}var h=v.a.Option;var C=g.a.create()(function(e){var t=e.tagList,a=e.categoryList,n={colon:!0,elements:[{key:"keyword",label:"\u5173\u952e\u5b57",widget:s.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u6587\u7ae0\u5173\u952e\u5b57",allowClear:!0})},{key:"tag",label:"\u6807\u7b7e",widget:s.a.createElement(v.a,{className:"form-select",allowClear:!0},t.map(function(e){return s.a.createElement(h,{key:e.name,value:e.name},e.name)}))},{key:"category",label:"\u5206\u7c7b",widget:s.a.createElement(v.a,{className:"form-select",allowClear:!0},a.map(function(e){return s.a.createElement(h,{key:e.name,value:e.name},e.name)}))}]};return s.a.createElement("div",{className:"query-form"},s.a.createElement(g.a,{layout:"inline",onSubmit:function(t){t.preventDefault(),e.form.validateFieldsAndScroll(function(t,a){if(!t){var n={};Object.keys(a).forEach(function(e){a[e]&&(n[e]=a[e])}),e.onQuery(n)}})}},s.a.createElement(O.a,{meta:n,form:e.form},[s.a.createElement(o.a,{type:"primary",htmlType:"submit",key:1},"\u68c0\u7d22"),s.a.createElement(o.a,{type:"primary",onClick:function(){k("/article/output/all")},key:2},"\u4e00\u952e\u5bfc\u51fa")])))}),L=a(109);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}t.default=function(e){var t=Object(d.d)(function(e){return{tagList:e.article.tagList,categoryList:e.article.categoryList}}),a=t.tagList,l=t.categoryList,y=Object(m.useState)(!1),g=Object(u.a)(y,2),E=g[0],v=g[1],O=Object(m.useState)([]),w=Object(u.a)(O,2),j=w[0],h=w[1],S=Object(m.useState)({current:1,pageSize:10,total:0}),P=Object(u.a)(S,2),I=P[0],x=P[1],z=Object(m.useState)({}),D=Object(u.a)(z,2),N=D[0],q=D[1];function B(){v(!0);var e=A({},N,{},I);e.current&&(e.page=e.current,delete e.current),f.a.get("/article/list",{params:e}).then(function(e){h(e.rows),x(A({},I,{total:e.count})),v(!1)}).catch(function(){v(!1)})}function J(e,t){var a=t.find(function(t){return t.name===e});return a&&a.color}Object(m.useEffect)(function(){B()},[N]);var Q=[{title:"\u6807\u9898",dataIndex:"title"},{title:"\u6807\u7b7e",dataIndex:"tags",render:function(e,t){return e.map(function(e){return s.a.createElement(i.a,{color:J(e.name,a),key:e.name},s.a.createElement(p.b,{to:"/tags/".concat(e.name)},e.name))})}},{title:"\u5206\u7c7b",dataIndex:"categories",render:function(e,t){return e.map(function(e){return s.a.createElement(i.a,{color:"#2db7f5",key:e.name},s.a.createElement(p.b,{to:"/categories/".concat(e.name)},e.name))})}},{title:"\u6d4f\u89c8\u6570",dataIndex:"viewCount",sorter:function(e,t){return t.viewCount-e.viewCount}},{title:"\u53d1\u5e03\u65f6\u95f4",dataIndex:"createdAt",sorter:function(e,t){return b()(e.createdAt).isBefore(t.createdAt)?1:-1}},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"updatedAt",sorter:function(e,t){return b()(e.updatedAt).isBefore(t.updatedAt)?1:-1}},{title:"\u64cd\u4f5c",render:function(e,t){return s.a.createElement("div",{className:"action"},s.a.createElement(o.a,{type:"link",size:"small"},s.a.createElement(p.b,{to:"/article/".concat(t.id)},"\u67e5\u770b")),s.a.createElement(o.a,{type:"link",size:"small"},s.a.createElement(p.b,{to:{pathname:"/admin/article/edit/".concat(t.id),state:{articleId:t.id}}},"\u7f16\u8f91")),s.a.createElement(o.a,{type:"primary",size:"small",style:{marginRight:10},onClick:function(e){return a=t.id,t.title,void k("/article/output/".concat(a));var a}},"\u5bfc\u51fa"),s.a.createElement(r.a,{title:"Are you sure\uff1f",icon:s.a.createElement(c.a,{type:"question-circle-o",style:{color:"red"}}),onConfirm:function(e){return a=t.id,void f.a.delete("/article/".concat(a)).then(function(e){B()});var a}},s.a.createElement(o.a,{type:"danger",size:"small"},"\u5220\u9664")))}}];return s.a.createElement("div",{className:"admin-article-manager"},s.a.createElement(C,{tagList:a,categoryList:l,onQuery:function(e){q(e)}}),s.a.createElement(n.a,{rowKey:"id",bordered:!0,loading:E,columns:Q,dataSource:j,pagination:!1}),s.a.createElement(L.a,Object.assign({},I,{onChange:function(e){I.current=e,x(I),B()}})))}}}]);